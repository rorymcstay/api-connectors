#
# BitMEX API
# ## REST API for the BitMEX Trading Platform  [View Changelog](/app/apiChangelog)  -  #### Getting Started  Base URI: [https://www.bitmex.com/api/v1](/api/v1)  ##### Fetching Data  All REST endpoints are documented below. You can try out any query right from this interface.  Most table queries accept `count`, `start`, and `reverse` params. Set `reverse=true` to get rows newest-first.  Additional documentation regarding filters, timestamps, and authentication is available in [the main API documentation](/app/restAPI).  _All_ table data is available via the [Websocket](/app/wsAPI). We highly recommend using the socket if you want to have the quickest possible data without being subject to ratelimits.  ##### Return Types  By default, all data is returned as JSON. Send `?_format=csv` to get CSV data or `?_format=xml` to get XML data.  ##### Trade Data Queries  _This is only a small subset of what is available, to get you started._  Fill in the parameters and click the `Try it out!` button to try any of these queries.  - [Pricing Data](#!/Quote/Quote_get)  - [Trade Data](#!/Trade/Trade_get)  - [OrderBook Data](#!/OrderBook/OrderBook_getL2)  - [Settlement Data](#!/Settlement/Settlement_get)  - [Exchange Statistics](#!/Stats/Stats_history)  Every function of the BitMEX.com platform is exposed here and documented. Many more functions are available.  ##### Swagger Specification  [â‡© Download Swagger JSON](swagger.json)  -  ## All API Endpoints  Click to expand a section. 
#
# OpenAPI spec version: 1.0.0
#
# https://github.com/swagger-api/swagger-codegen.git
#
# NOTE: Auto generated by the swagger code generator program.

cmake_minimum_required (VERSION 3.16)

#PROJECT's NAME
project(CppRestSwaggerClient)
if(BOOST_ASIO_DISABLE_CONCEPTS)
    add_definitions(-DBOOST_ASIO_DISABLE_CONCEPTS=1)
    message(STATUS "Disabled boost asio concepts.")
endif(BOOST_ASIO_DISABLE_CONCEPTS)

find_package(CPPRESTSDK REQUIRED)
message("CPPRESTSDK_DIR=${CPPRESTSDK_DIR}")

# THE LOCATION OF OUTPUT BINARIES
set(CMAKE_LIBRARY_DIR ${PROJECT_SOURCE_DIR}/lib)
set(LIBRARY_OUTPUT_PATH ${CMAKE_LIBRARY_DIR})

set(CMAKE_CXX_STANDARD 11)
add_compile_options("-fPIC")
set(CMAKE_EXPORT_COMPILE_COMMANDS 1)

if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Release)
endif()

# BUILD TYPE
message(STATUS "A ${CMAKE_BUILD_TYPE} build configuration is detected")

# Update require components as necessary
#find_package(Boost 1.45.0 REQUIRED COMPONENTS ${Boost_THREAD_LIBRARY} ${Boost_SYSTEM_LIBRARY} ${Boost_REGEX_LIBRARY} ${Boost_DATE_TIME_LIBRARY} ${Boost_PROGRAM_OPTIONS_LIBRARY} ${Boost_FILESYSTEM_LIBRARY})


include_directories(${PROJECT_SOURCE_DIR} api model ${PACKAGE_INSTALLS}/cpprest/include)

#SUPPORTING FILES
set(SUPPORTING_FILES "ApiClient" "ApiConfiguration" "ApiException" "HttpContent" "IHttpBody" "JsonBody" "ModelBase" "MultipartFormData" "Object" "auth_helpers")
#SOURCE FILES
file(GLOB SOURCE_FILES  "api/*"  "model/*")
file(GLOB HEADER_FILES "api/*.h" "model/*.h" "*.h")

add_library(${PROJECT_NAME} ${SUPPORTING_FILES} ${SOURCE_FILES})
link_directories("${CPPRESTSDK_DIR}/../../")

target_link_libraries(${PROJECT_NAME}
        cpprest
        boost_system
        pthread
    )

# loses directory hiearchy
#set_target_properties(
#    ${PROJECT_NAME}
#    PROPERTIES PUBLIC_HEADER
#    "${HEADER_FILES}")

install(DIRECTORY "${CMAKE_SOURCE_DIR}/api/"
        DESTINATION "include/api"
        FILES_MATCHING
        PATTERN "*.h"
)
install(DIRECTORY "${CMAKE_SOURCE_DIR}/model/"
        DESTINATION "include/model"
        FILES_MATCHING
        PATTERN "*.h"
)
install(FILES
        "ApiClient.h"
        "ApiConfiguration.h"
        "ApiException.h"
        "HttpContent.h"
        "IHttpBody.h"
        "JsonBody.h"
        "ModelBase.h"
        "MultipartFormData.h"
        "Object.h"
        "auth_helpers.h"
        DESTINATION "include/" # target directory
)
    
add_subdirectory(test)

install(TARGETS ${PROJECT_NAME}
    EXPORT bitmex-swagger-client 
    LIBRARY DESTINATION lib
    #PUBLIC_HEADER DESTINATION include 
)
install(EXPORT bitmex-swagger-client
    NAMESPACE BITMEX_
    DESTINATION lib
)
